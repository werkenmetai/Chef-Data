# Cloudflare Pages configuration for Auth Portal
name = "exact-online-mcp"
compatibility_date = "2024-01-01"
pages_build_output_dir = "./dist"

# D1 Database binding (top level - inherited by all environments)
[[d1_databases]]
binding = "DB"
database_name = "exact-mcp-db"
database_id = "30788ed4-4a60-4453-b176-dd9da7eecb2d"

# R2 Bucket for error screenshots (EU region)
# Create with: npx wrangler r2 bucket create feedback-screenshots-eu --jurisdiction eu
[[r2_buckets]]
binding = "SCREENSHOTS_BUCKET"
bucket_name = "feedback-screenshots-eu"
jurisdiction = "eu"

# R2 Bucket for message attachments (EU region - GDPR compliant)
# Create with: npx wrangler r2 bucket create message-attachments-eu --jurisdiction eu
[[r2_buckets]]
binding = "ATTACHMENTS_BUCKET"
bucket_name = "message-attachments-eu"
jurisdiction = "eu"

# Production environment
[env.production]
name = "exact-online-mcp"

[[env.production.d1_databases]]
binding = "DB"
database_name = "exact-mcp-db"
database_id = "30788ed4-4a60-4453-b176-dd9da7eecb2d"

[[env.production.r2_buckets]]
binding = "SCREENSHOTS_BUCKET"
bucket_name = "feedback-screenshots-eu"
jurisdiction = "eu"

[[env.production.r2_buckets]]
binding = "ATTACHMENTS_BUCKET"
bucket_name = "message-attachments-eu"
jurisdiction = "eu"

# Preview environment (for PR previews)
[env.preview]
name = "exact-online-mcp-preview"

[[env.preview.d1_databases]]
binding = "DB"
database_name = "exact-mcp-db"
database_id = "30788ed4-4a60-4453-b176-dd9da7eecb2d"

[[env.preview.r2_buckets]]
binding = "SCREENSHOTS_BUCKET"
bucket_name = "feedback-screenshots-eu"
jurisdiction = "eu"

[[env.preview.r2_buckets]]
binding = "ATTACHMENTS_BUCKET"
bucket_name = "message-attachments-eu"
jurisdiction = "eu"
